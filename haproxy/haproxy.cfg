global
    maxconn 4096

defaults
    mode http
    timeout connect 5000ms
    timeout client 50000ms
    timeout server 50000ms
    option httplog
    option dontlognull
    retries 3

frontend razz_bank_frontend
    bind *:80
    default_backend razz_bank_servers

backend razz_bank_servers
    balance roundrobin
    option httpchk GET /health
    server app1 razz-bank-app:5000 check
    # Add more servers for high availability
    # server app2 razz-bank-app-2:5000 check

# Stats interface
listen stats
    bind *:8080
    stats enable
    stats uri /stats
    stats refresh 30s
    stats admin if TRUE